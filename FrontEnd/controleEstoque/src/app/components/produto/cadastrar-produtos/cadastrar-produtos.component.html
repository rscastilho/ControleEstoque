<div>
  <app-titulo [titulo]="'Cadastrar novo produto'"></app-titulo>
</div>
<div class="centralizar bloco">
  <mat-card>
    <form [formGroup]="formulario" (ngSubmit)="salvarDados()">
      <mat-card-title>

      </mat-card-title>
      <mat-card-header>
      </mat-card-header>
      <mat-divider></mat-divider>
      <mat-card-content>
        <div fxLayout="row" fxLayoutGap="20px">
          <div fxFlex = "50">
            <div>
              <mat-form-field>
                <mat-label>Descrição</mat-label>
                <input matInput formControlName="descricao" placeholder="Descrição " required minlength="3" maxlength="50">
              </mat-form-field>
            </div>
            <div>
              <mat-form-field>
                <mat-label>Quantidade</mat-label>
                <input type="number" matInput formControlName="quantidadeEstoque" placeholder="Quantidade " required [(ngModel)]="quantidade" min="0" (blur)="calcularValor()">
              </mat-form-field>
            </div>
              <div>
                <mat-form-field>
                  <mat-label>Valor</mat-label>
                  <input matInput formControlName="valor" placeholder="Valor do produto" required minlength="3" maxlength="50" [(ngModel)]="valor" (blur)="calcularValor()">
                </mat-form-field>
              </div>
              <div>
                <mat-form-field>
                  <mat-label> Selecione a categoria</mat-label>
                  <mat-select formControlName="categoriaId">

                    <mat-option *ngFor="let categoria of categorias" [value]=categoria.id> {{categoria.descricao}}</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>






          </div>
          <div fxFlex = "50">
            <div style="display: none;">
              <mat-form-field>
                <mat-label>Valor</mat-label>
                <input matInput formControlName="imagemUrl" placeholder="Valor do produto" required minlength="3" maxlength="50" [(ngModel)]="nomeImg">
              </mat-form-field>
            </div>

           <div>
                <input type="file" placeholder="Imagem"  (change)="carregarImagem($event)" #carregaImagem class="ocultar" accept="image/*">
            </div>
            <div>
              <mat-form-field>
                <mat-label>Quantidade minima</mat-label>
                <input type="number" matInput formControlName="quantidadeMinima" placeholder="Quantidade Minima" min="0" required>
              </mat-form-field>
            </div>
            <div>
              <mat-form-field>
                <mat-label> Selecione o fornecdor</mat-label>
                <mat-select formControlName="fornecedorId">

                  <mat-option *ngFor="let fornecedor of fornecedores" [value]=fornecedor.id> {{fornecedor.razaoSocial}}</mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            {{valorTotal}}
            <img class="imagem" [src]=imagemURL *ngIf="imagemURL" (click)="carregaImagem.click()" matTooltip="Clique para carregar imagem">
          </div>
        </div>
        <div>

        </div>

      </mat-card-content>
      <mat-divider></mat-divider>

      <mat-card-actions class="botoes">

        <button mat-stroked-button color="primary" type="submit" [disabled]="formulario.invalid"> Salvar</button>
        <button mat-stroked-button color="primary" routerLink="/listarprodutos" style="border: 0;"> Voltar</button>
      </mat-card-actions>


      <mat-card-footer>

      </mat-card-footer>
    </form>
  </mat-card>

</div>
